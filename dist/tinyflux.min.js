!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Immutable")):"function"==typeof define&&define.amd?define(["Immutable"],e):"object"==typeof exports?exports.TinyFlux=e(require("Immutable")):t.TinyFlux=e(t.Immutable)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){if(t===e||s(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(e),o=0;o<n.length;o++)if(!i(n[o])||!s(t[n[o]],e[n[o]]))return!1;return!0}function i(t){function e(){this._listeners=new Set,this.initialize&&this.initialize(),this._data=this.get()}t.on=function(t){this._listeners.add(t)},t.off=function(t){this._listeners.delete(t)},t.trigger=function(){var t=this.get();if(!s(t,this._data)){this._data=t;var e=!0,n=!1,r=void 0;try{for(var i,o=function(){var e=i.value;setTimeout(function(){return e(t)},0)},a=this._listeners[Symbol.iterator]();!(e=(i=a.next()).done);e=!0)o()}catch(u){n=!0,r=u}finally{try{!e&&a.return&&a.return()}finally{if(n)throw r}}}},t.connect=function(t,e){var n=this,r=function(t){n[e]=t,n.trigger()};t.on(r),this[e]=t.get()},t.connectFilter=function(t,e,n){var r=this,i=function(t){r[e]=n(t),r.trigger()};t.on(i),this[e]=n(t.get())},t._get=function(){return this._data},e.prototype=t;var n=new e,r={};r.on=n.on.bind(n),r.off=n.off.bind(n),r.get=n._get.bind(n);for(var i in n){var o=n[i];if("function"==typeof o&&"on"==i.substr(0,2)&&0!=i.substr(2).length){var a=i.substr(2,1).toLowerCase()+i.substr(3);r[a]=o.bind(n)}}return r}var o=n(1),s=o.is.bind(o),a={getInitialState:function(){this._stores=[],this.initialize&&this.initialize();var t={},e=!0,n=!1,r=void 0;try{for(var i,o=this._stores[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value,a=s.stateName,u=s.store.get();s.filter&&(u=s.filter(u)),t[a]=u}}catch(f){n=!0,r=f}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return t},connect:function(t,e){var n=this,r=function(t){var r={};r[e]=t,n.setState(r)};t.on(r),this._stores.push({store:t,trigger:r,stateName:e})},connectFilter:function(t,e,n){var r=this,i=function(t){var i={};i[e]=n(t),r.setState(i)};t.on(i),this._stores.push({store:t,trigger:i,stateName:e,filter:n})},shouldComponentUpdate:function(t,e){return!r(this.props,t)||!r(this.state,e)},componentWillUnmount:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._stores[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.store.off(o.trigger)}}catch(s){e=!0,n=s}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}this._stores=null}};t.exports={createStore:i,ComponentMixin:a}},function(e,n){e.exports=t}])});