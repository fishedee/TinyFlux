!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Immutable")):"function"==typeof define&&define.amd?define(["Immutable"],e):"object"==typeof exports?exports.TinyFlux=e(require("Immutable")):t.TinyFlux=e(t.Immutable)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t,e){if(t===e||s(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(e),o=0;o<r.length;o++)if(!i(r[o])||!s(t[r[o]],e[r[o]]))return!1;return!0}function i(t){function e(){this._listeners=new Set,this.initialize&&this.initialize(),this._data=this.getData()}t.on=function(t){this._listeners.add(t)},t.off=function(t){this._listeners.delete(t)},t.trigger=function(){var t=this.getData();if(!s(t,this._data)){this._data=t;var e=!0,r=!1,n=void 0;try{for(var i,o=this._listeners[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;setTimeout(a,0)}}catch(u){r=!0,n=u}finally{try{!e&&o.return&&o.return()}finally{if(r)throw n}}}},t.listen=function(t){t.on(this.trigger.bind(this))},t._getData=function(){return this._data},e.prototype=t;var r=new e,n={};n.on=r.on.bind(r),n.off=r.off.bind(r),n.getData=r._getData.bind(r);for(var i in r){var o=r[i];if("function"==typeof o&&"on"==i.substr(0,2)&&0!=i.substr(2).length){var a=i.substr(2,1).toLowerCase()+i.substr(3);n[a]=o.bind(r)}}return n}var o=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(u){i=!0,o=u}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=r(1),s=a.is.bind(a),u={getInitialState:function(){this._stores=new Map,this.initialize&&this.initialize();var t={};return this.getData&&(t=this.getData()),t},listen:function(t){var e=this;if(!this._stores.has(t)){var r=function(){if(e.getData){var t=e.getData();e.setState(t)}};t.on(r),this._stores.set(t,r)}},shouldComponentUpdate:function(t,e){return!n(this.props,t)||!n(this.state,e)},componentWillUnmount:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this._stores[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var a=o(n.value,2),s=a[0],u=a[1];s.off(u)}}catch(f){e=!0,r=f}finally{try{!t&&i.return&&i.return()}finally{if(e)throw r}}this._stores=null}};t.exports={createStore:i,ComponentMixin:u}},function(e,r){e.exports=t}])});