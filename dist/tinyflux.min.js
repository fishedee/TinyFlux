!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Immutable"),require("React")):"function"==typeof define&&define.amd?define(["Immutable","React"],e):"object"==typeof exports?exports.TinyFlux=e(require("Immutable"),require("React")):t.TinyFlux=e(t.Immutable,t.React)}(this,function(t,e){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t===e||c(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(e),o=0;o<r.length;o++)if(!i(r[o])||!c(t[r[o]],e[r[o]]))return!1;return!0}function o(t){return t.mixins||(t.mixins=[]),t.mixins.push(d),l.default.createClass(t)}function s(t){function e(){this._listeners=new Set,this.initialize&&this.initialize()}t.on=function(t){this._listeners.add(t)},t.off=function(t){this._listeners.delete(t)},t.trigger=function(){var t=this.get(),e=!0,r=!1,n=void 0;try{for(var i,o=this._listeners[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;s(t)}}catch(a){r=!0,n=a}finally{try{!e&&o.return&&o.return()}finally{if(r)throw n}}},e.prototype=t;var r=new e,n={};n.on=r.on.bind(r),n.off=r.off.bind(r),n.get=r.get.bind(r);for(var i in r){var o=r[i];if("function"==typeof o&&"on"==i.substr(0,2)&&0!=i.substr(2).length){var s=i.substr(2,1).toLowerCase()+i.substr(3);n[s]=o.bind(r)}}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.createComponent=o,e.createStore=s;var a=r(1),u=n(a),f=r(2),l=n(f),c=u.default.is.bind(u.default),d={getInitialState:function(){this._stores=[],this.initialize&&this.initialize();var t={},e=!0,r=!1,n=void 0;try{for(var i,o=this._stores[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value,a=s.stateName,u=s.store.get();s.filter&&(u=s.filter(u)),t[a]=u}}catch(f){r=!0,n=f}finally{try{!e&&o.return&&o.return()}finally{if(r)throw n}}return t},connect:function(t,e){var r=this,n=function(t){var n={};n[e]=t,r.setState(n)};t.on(n),this._stores.push({store:t,trigger:n,stateName:e})},connectFilter:function(t,e,r){var n=this,i=function(t){var i={};i[e]=r(t),n.setState(i)};t.on(i),this._stores.push({store:t,trigger:i,stateName:e,filter:r})},shouldComponentUpdate:function(t,e){return!i(this.props,t)||!i(this.state,e)},componentWillUnmount:function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this._stores[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.store.off(o.trigger)}}catch(s){e=!0,r=s}finally{try{!t&&i.return&&i.return()}finally{if(e)throw r}}this._stores=null}};e.default={createComponent:o,createStore:s}},function(e,r){e.exports=t},function(t,r){t.exports=e}])});